import Sound.Tidal.MIDI.Context
import Sound.Tidal.MIDI.CC
import Sound.Tidal.MIDI.VolcaFM

displayOutputDevices >>= putStrLn
devices <- midiDevices

m <- midiStream devices "X18/XR18 MIDI 1" 1 (volcafmController {Sound.Tidal.MIDI.Context.latency = 0.4})

let hush' = hush
let hush = hush' >> m silence

cps 1.1

m $ (breakUp $ off 0.125 (|+| n "<5 7 12 5>") $ n (superimpose (fill "c8 c9") "<c7(3,8) g7(3,8)>"))
  -- # algorithm (slow 16 sine)
  |+| n "<0 4 7 12>"
  |+| n (chord "major")

d1 $ rev $ chop 8 $ sound "acid(3,8)"
  # legato 1
  |*| speed 0.5

d2 $ sound "micron(3,8)"
